git show -s --format="%H %s %ad" e5f1d98f


export function checkOverlap(
  startDate: Date,
  endDate: Date | null,
  clientSolutions: ISolutionGroupCashflowViewModel[],
  currentStartDate: Date | null,
  operationType: Operation,
  cashflowGroupCode: string // Nuevo parámetro para comparar el código del grupo
): boolean {
  let isOverlap = false;

  for (const cs of clientSolutions) {
    const csStartDate = new Date(cs.StartDate);
    const csEndDate = cs.EndDate ? new Date(cs.EndDate) : new Date(Infinity);
    const endDateNew = endDate ? endDate : new Date(Infinity);

    // Verifica si estamos actualizando la misma fecha
    if (
      currentStartDate &&
      csStartDate.getTime() === currentStartDate.getTime() &&
      operationType === Operation.Update
    ) {
      continue;
    }

    // Nueva condición: Verifica también el CashflowsGroupCode
    if (cs.CashflowGroupCode !== cashflowGroupCode) {
      continue; // Salta si los códigos de grupo son diferentes
    }

    // Verificación del overlap con el mismo CashflowsGroupCode
    if (endDateNew < csStartDate || startDate > csEndDate) {
      continue; // No hay overlap
    }

    isOverlap = true; // Si llegamos aquí, hay un overlap
    break;
  }

  return isOverlap;
}




clientSolutions = [
  { StartDate: "2020", EndDate: "2023", CashflowGroupCode: "AA" },
  { StartDate: "2021", EndDate: "2024", CashflowGroupCode: "BB" },
  { StartDate: "2022", EndDate: "2024", CashflowGroupCode: "AA" },
];
