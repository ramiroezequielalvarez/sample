if (selectedMarketValue) {
  this.watchMarketValueAmounts(selectedMarketValue);
}

private watchMarketValueAmounts(selected: MarketValue) {
  this.subscriptions.push(
    this.marketValueAmountsLoaded$.pipe(
      filter(Boolean),
      switchMap(() => this.marketValueAmounts$),
      filter(Boolean),
      map(amts => this.calculateVarianceAmount(amts, this.marketValueWorkflow)),
    ).subscribe(variance => {
      this.importedVals = this.MarketValueUpdatesService.setImportedVals(
        this.buildMarketValuesToDisplay(selected),
        variance
      );
    })
  );
}


getMarketValueExpectedAmounts(
  externalManagerCode: string,
  asOfDate: string,
  effectiveDate: string,
  payload: IMarketValueExpectedAmountUpdateRequest
): Observable<IMarketValueExpectedAmount> {

  const url = `${this.queryApiUrl}/externalmanagersconfig/${externalManagerCode}/(${asOfDate}:${effectiveDate})/expectedamounts`;

  return this.http.put<IMarketValueExpectedAmount>(
    url,
    payload,                     // <<--- cuerpo requerido
    { withCredentials: true }
  );
}
